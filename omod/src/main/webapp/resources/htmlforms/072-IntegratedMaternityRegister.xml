<htmlform formName="HMIS 072 Maternity Form"
          formDescription="Admission into a clinic for a pregnant woman to give birth"
          formEncounterType="a9f11592-22e7-45fc-904d-dfe24cb1fc67"
          formUuid="bf56b96c-7aa2-4a3f-aca3-57f43aca4cd6"
          formVersion="1.3"
          formAddMetadata="yes"
          formUILocation="patientDashboard.visitActions"
          formOrder="10"
          formIcon="icon-user"
          formShowIf="(visit.active || !visit.active) &amp;&amp; patient.person.gender=='F' &amp;&amp; patient.person.age &gt; 9 &amp;&amp; patient.person.dead==false &amp;&amp; sessionLocation.uuid=='e9bc61b5-69ff-414b-9cf0-0c22d6dfca2b'"
          formDisplayStyle="Standard"
          formLabel="Maternity">
	<style type="text/css">
		form#htmlform div.ai-page-frame table>tbody tr:nth-child(odd) td {
			background: #eeeeee;
		}

		form#htmlform div.ai-page-frame table>tbody tr:nth-child(even) td {
			background: #f9f9f9;
		}

		form#htmlform div.ai-page-frame fieldset#baby-information table {
			margin: 0 0 5px 0;
		}
	</style>

	<script type="text/javascript">
	    jQuery(document).ready(function(jq) {
	        const VIRAL_LOAD_RESULTS_CONCEPT_ID = 1305;
	        const VIRAL_LOAD_DETECTED_CONCEPT_ID = 1301;
	        const VIRAL_LOAD_NOT_DETECTED_CONCEPT_ID = 1306;
	        const VIRAL_LOAD_SAMPLE_REJECTED_CONCEPT_ID = 1304;

	        const HIV_POSITIVE_CONCEPT_ID = 90166;
	        const HIV_NEGATIVE_CONCEPT_ID = 90167;

	        const YES_CONCEPT_ID = 1065;
	        const NO_CONCEPT_ID = 1066;

	        const 	TRRK_CONCEPT_ID = 99738,
	        		TRR_TICK_CONCEPT_ID = 164963,
	        		TRRP_CONCEPT_ID = 99736,
	        		TRR_CONCEPT_ID = 99315;

	        const HIV_INFORMATION_SECTION = '#hiv-information-section';
	        const PRE_ART_NUMBER_FIELD = '#pre-art-number';
	        const ARVS_ADMINISTERED_TO_BABY_FIELD = '#arvs-administered-to-baby';
	        const IYCF_FIELD = '#iycf';

			const RED_CONCEPT_ID = 99028;
			const GREEN_CONCEPT_ID = 99027;
			const YELLOW_CONCEPT_ID = 99029;


			var $viralLoadField = getField('viral-load.value');
			var $viralLoadStatusField = getField('viral-load-status.value');
	        var $viralLoadResultsField = getField('viral-load-results.value');
	        var $iycfField = jq(IYCF_FIELD).find('input');
	        var $arvsToMotherField = getField('arvs-to-mother.value');
	        var $gestationWeeksField = getField('gestation-weeks.value');
	        var $diagnosisParentFields = $('span.parent-diagnosis').find('input[type=checkbox]');
	        var $diagnosisChildFields = $('span.child-diagnoses').find('input[type=checkbox]');
			var $encounterDateField = jq('#encounterDate').find('input[type="hidden"]');
			var $encounterDate = jq('#encounterDate').find('input[type="hidden"]').val();
			var $muacQuantitativeField = getField('muac-quantitative.value');
			var $muacQualitativeField = getField('muac-qualitative.value');
			var $emtctCodeWomanField = getField('emtct-code-woman.value');
			var $preArtNumberField = jq('span#pre-art-number').find('input[type="text"]');

	        var viralLoadResultsChange = function() {
	            var $viralLoadResults = getValue('viral-load-results.value');
	            fieldHelper.removeReadonly($viralLoadField);
	            fieldHelper.enable($viralLoadField);
	            fieldHelper.disable($viralLoadStatusField);
	            if ($viralLoadResults == VIRAL_LOAD_NOT_DETECTED_CONCEPT_ID) { //if viral load quantitive is 'not detected' set a viral load count of 1
	                $viralLoadField.val(1);
	                $viralLoadField.change();
	                fieldHelper.makeReadonly($viralLoadField);
					setValue('viral-load-status.value','');
	            } else if($viralLoadResults == VIRAL_LOAD_DETECTED_CONCEPT_ID) { //if viral load quantitive is 'detected' allow for entry of viral load count
	                if ($viralLoadField.val() == 1) {
		                $viralLoadField.val("");
		                $viralLoadField.change();
	                }
	                fieldHelper.enable($viralLoadStatusField);
	            } else { //if viral load quantitive is 'rejected' clear viral load count field
	                $viralLoadField.val("");
	                $viralLoadField.change();
	                fieldHelper.disable($viralLoadField);
					setValue('viral-load-status.value','');
	            }
	        };

	        /**
	        * This function checks if the HIV status field has been locked(Contains the 'locked' class )
	        */
	        var isHivStatusFieldLocked = function () {
	            return $hivStatusField.is('.locked');
	        }

	        var hivStatusChange = function (hivStatus) {
	            var $hivInformationSection = jq(HIV_INFORMATION_SECTION);
	            var $arvsAdministeredToBabyField = jq(ARVS_ADMINISTERED_TO_BABY_FIELD).find('input');
	            if (hivStatus == HIV_POSITIVE_CONCEPT_ID) {
	                fieldHelper.enable($hivInformationSection.find('input'));
	                fieldHelper.enable($arvsAdministeredToBabyField);
		            fieldHelper.enable($arvsToMotherField);
	                fieldHelper.enable($hivInformationSection.find('input,select'));
	                fieldHelper.enable($preArtNumberField);
	            } else {
	                $hivInformationSection.find('input[type="text"],select').each(function() {
	                	var isEmtctCodeField = jq(this).parents('span:first').length &gt; 0 &amp;&amp; jq(this).parents('span:first').attr('class').indexOf('emtct-code') != -1; //Check if current control is an eMTCT Code field
	                    if ( isEmtctCodeField ) {
	                        fieldHelper.enable(jq(this));
	                    } else {
	                        fieldHelper.disable(jq(this));
	                    }
	                });
	                fieldHelper.disable($arvsAdministeredToBabyField);
	                fieldHelper.disable($preArtNumberField);
					fieldHelper.disable($arvsToMotherField);
	            }
	            viralLoadResultsChange();
	        };

			var muacChange = function() {
				var muacQuantitative = getValue('muac-quantitative.value');
				var muacQualitative = getValue('muac-qualitative.value');
				var $muacQuantitativeErrorField = getField('muac-quantitative.error');
				var $muacQualitativeErrorField = getField('muac-qualitative.error');


				if (muacQuantitative == '' || muacQualitative =='') {
					return;
				}

				var valid = false;

				var validRange = {};

				<includeIf velocityTest="$patient.age &lt; 5">
					validRange = [
						{color: RED_CONCEPT_ID, lower:0, upper:11.4},
						{color: YELLOW_CONCEPT_ID, lower:11.5, upper:12.4},
						{color: GREEN_CONCEPT_ID, lower:12.5, upper:50}
						];
				</includeIf>
				<includeIf velocityTest="$patient.age &lt; 10 &amp;&amp; $patient.age &gt;=5">
					validRange = [
						{color: RED_CONCEPT_ID, lower:0, upper:13.4},
						{color: YELLOW_CONCEPT_ID, lower:13.5, upper:14.4},
						{color: GREEN_CONCEPT_ID, lower:14.5, upper:50}
						];
				</includeIf>
				<includeIf velocityTest="$patient.age &lt; 18 &amp;&amp; $patient.age &gt;=10">
					validRange = [
						{color: RED_CONCEPT_ID, lower:0, upper:16.5},
						{color: YES_CONCEPT_ID, lower:16.5, upper:18.9},
						{color: GREEN_CONCEPT_ID, lower:19, upper:100}
						];
				</includeIf>

				<includeIf velocityTest="$patient.age &gt;=18">
					validRange = [
						{color: RED_CONCEPT_ID, lower:0, upper:18.9},
						{color: YELLOW_CONCEPT_ID, lower:19, upper:21.9},
						{color: GREEN_CONCEPT_ID, lower:22, upper:100}
						];
				</includeIf>

				var selectedValidRange =  validRange.find(function(o) {
					return o.color == muacQualitative;
				});

				if (muacQuantitative &gt;= selectedValidRange.lower &amp;&amp; muacQuantitative &lt;= selectedValidRange.upper) {
					valid = true;
				}

				if (!valid) {
					$muacQuantitativeErrorField.html('The MUAC Qualitative and Quantitative values do not match, please check').show();
					$muacQualitativeErrorField.html('The MUAC Qualitative and Quantitative values do not match, please check').show();
					$muacQuantitativeField.addClass('error');
					$muacQualitativeField.addClass('error');
				} else {
					$muacQuantitativeErrorField.html('').hide();
					$muacQualitativeErrorField.html('').hide();
					$muacQuantitativeField.removeClass('error');
					$muacQualitativeField.removeClass('error');
				}
			};

	        var iycfChange = function() {
	            var $iycf =  getValue('iycf.value');
	            var $infantFeedingOptionField = getField('infant-feeding-option.value');
	            if ($iycf == YES_CONCEPT_ID) {
	                fieldHelper.enable($infantFeedingOptionField);
	            } else {
	                fieldHelper.enable($infantFeedingOptionField);
	            }
	        };

	        var arvsToMotherChange =  function() {
	            var $arvsToMother =  getValue('arvs-to-mother.value');
	            var $preArtNumberField = jq(PRE_ART_NUMBER_FIELD).find('input:text');
	            if ($arvsToMother != '') {
	                fieldHelper.enable($preArtNumberField);
	            } else {
	                fieldHelper.disable($preArtNumberField);
	            }
	        };

	        var setDelivery = function() {
	        	var $gestationWeeks = getValue('gestation-weeks.value');

	        	if ($gestationWeeks &lt; 37) {
					//select pre-term
					setValue('delivery.value', 129218);
	        	} else {
					//select term
					setValue('delivery.value', 1395);
	        	}
	        }

	        var $othersField = jq('span.has-comment input[type=checkbox]');

	        var toggleOtherSpecify = function() {
	            $othersField.each(function(){
	                var $specifyField = jq(this).siblings('input[type=text]');
	                if (jq(this).attr('checked') == 'checked') {
	                    fieldHelper.removeReadonly($specifyField);
	                } else {
	                    fieldHelper.makeReadonly($specifyField);
	                    $specifyField.val('');
	                    $specifyField.change();
	                }
	            });
	        };

	        var viralLoadResultsValidate = function() {
	            var $viralLoadResultsQualitative = getValue('viral-load-results.value');
	            var $viralLoadResultsQuantitative = getValue('viral-load.value');

	            if($viralLoadResultsQualitative == VIRAL_LOAD_DETECTED_CONCEPT_ID &amp; $viralLoadResultsQuantitative == '') {
	                getField('viral-load.error').html('Invalid viral load results').show();
	                getField('viral-load.value').addClass('error');
	                return false;
	            } else {
	            	getField('viral-load.value').removeClass('error');
	            }

	            return true;
	        }

	        var apgarScoreValidate = function() {
	        	var apgarScoreField = getField('apgar-score.value');
	        	var apgarScore = getValue('apgar-score.value');
	        	var apgarScoreErrorField = getField('apgar-score.error');
				
	        	if (apgarScore != '' &amp;&amp; (apgarScore &lt; 1 || apgarScore &gt; 10)) {
					apgarScoreField.addClass('error');
					apgarScoreErrorField.html('Apgar score needs to be between 1 and 10').show();
					return false
	        	} else {
	        		apgarScoreField.removeClass('error');
					apgarScoreErrorField.html('').hide();
	        	}

	        	return true
	        }

			var gravidaValidate = function() {
	        	var gravidaField = getField('gravida.value');
	        	var gravida = getValue('gravida.value');
	        	var gravidaErrorField = getField('gravida.error');
	        	
	        	if (gravida &lt; 0) {
					gravidaField.addClass('error');
					gravidaErrorField.html('Parity cannot be less than 0').show();
					return false;
	        	} else {
	        		gravidaField.removeClass('error');
					gravidaErrorField.html('').hide();
	        	}

	        	return true;
			};

			var parityValidate = function() {
	        	var parityField = getField('parity.value');
	        	var parity = getValue('parity.value');
	        	var parityErrorField = getField('parity.error');
	        	
	        	if (parity &lt; 0) {
					parityField.addClass('error');
					parityErrorField.html('Gravida cannot be less than 0').show();
					return false;
	        	} else {
	        		parityField.removeClass('error');
					parityErrorField.html('').hide();
	        	}

	        	return true;
			};

	        var gestationWeeksValidate = function() {
	        	var gestationWeeks = getValue('gestation-weeks.value');
	        	var gestationWeeksErrorField = getField('gestation-weeks.error');

	        	if (gestationWeeks &lt;= 28 || gestationWeeks &gt; 45) {
					gestationWeeksField.addClass('error');
					gestationWeeksErrorField.html('Weeks of Gestation should be between 28 and 45').show();
					return false;
	        	} else {
	        		gestationWeeksField.removeClass('error');
					gestationWeeksErrorField.html('').hide();
	        	}

	        	return true
	        }

	        var diagnosisParentFieldsChange = function() {
	        	var $parentField =  $(this),
	        		$childFields = $(this).parents('span:first').siblings('span.child-diagnoses').find('input[type=checkbox]'),
					//$errorField = $parentField.siblings('span.error');
					$errorField = $childFields.siblings('span.error');
				if ($parentField.is(':checked')) {
					fieldHelper.enable($childFields);
					var $checkedChildFields = $childFields.filter(function() {
						return this.checked == true;
					});
					if ($checkedChildFields.length == 0) { //Show message if at least one of the child obs field is not selected
						$errorField.html('Select at least one').show();
					} else {
						$errorField.html('').hide();
					}
				} else {
					fieldHelper.disable($childFields);
					$errorField.html('').hide();
					$childFields.attr('checked', false);
				}				
	        };
			
			var diagnosisChildFieldsChange = function() {
				var $thisField = jq(this),
					$container = $thisField.parents('span.child-diagnoses:first'),
					$childFields = $container.find('input[type=checkbox]'),					
					$parentField = $container.siblings('span.parent-diagnosis').find('input[type=checkbox]'),
					$errorField = $childFields.siblings('span.error');

				$errorField.html('').hide();
				if ($thisField.is(':checked')) {
					$childFields.attr('checked', false);
					$thisField.attr('checked', true);
				} else {
					$errorField.html('Select at least one').show();
				}
			};

		    var isOtherSelectedAndSpecified = function() {
		    	var valid = true;
		        $othersField.each(function(){
		            var $specifyField = jq(this).siblings('input[type=text]');
		            var $errorField = jq(this).siblings('span.error');
		            if (jq(this).attr('checked') == 'checked' &amp;  $specifyField.val() == '') {
		                $errorField.html('Please specify').show();
		                $specifyField.addClass('error');
		                valid = false;
		            } else {
		            	$errorField.html('').hide();
		            	$specifyField.removeClass('error');
		            }

		        });

		        return valid;
		    };

		    var hideOtherEmtctCodesForKnownHivPositiveStatus = function() {
				var emtctCodesToHide = [99313,99734,99314,99737,99739,164962];
				var emtctControlsToHide =  $emtctCodeWomanField.children('option').filter(function() {
					return emtctCodesToHide.indexOf(parseInt(this.value)) &gt; -1;
				});
				$emtctCodeWomanField.children('option').attr('disabled', false);
				emtctControlsToHide.attr('disabled', true);
				<ifMode mode="ENTER">
					setValue('emtct-code-woman.value', 99738);
				</ifMode>
		    };

		    var showOtherEmtctCodesForKnownHivNegativeStatus = function() {
				var emtctCodesToHide = [];
				var emtctControlsToHide =  $emtctCodeWomanField.children('option').filter(function() {
					return emtctCodesToHide.indexOf(parseInt(this.value)) &gt; -1;
				});
				$emtctCodeWomanField.children('option').attr('disabled', false);
				emtctControlsToHide.attr('disabled', true);
				<ifMode mode="ENTER">
					setValue('emtct-code-woman.value', '');
				</ifMode>
		    };

		    var getHivStatus = function () {
				/**
				* Make HIV Status field not changeable only if the encounter date of the ART summary 
				* page encounter (as we shall be entering retrospective data) is before the date of 
				* the visit for which data is being entered
				*/
				var visitDate = $encounterDateField.val();
				var artSummaryEncounterDate = <lookup complexExpression="#set ($artSummaryEncounterDate = $fn.latestEncounter('8d5b27bc-c2cc-11de-8d13-0010c6dffd0f').encounterDatetime)
																		#if ($artSummaryEncounterDate) '$artSummaryEncounterDate';
																		#else '';
																		#end"/>
				if (artSummaryEncounterDate !='' &amp;&amp; artSummaryEncounterDate &lt; visitDate) {
					hivStatusChange(HIV_POSITIVE_CONCEPT_ID);
					hideOtherEmtctCodesForKnownHivPositiveStatus();
				} else {
					hivStatusChange(HIV_NEGATIVE_CONCEPT_ID);
					showOtherEmtctCodesForKnownHivNegativeStatus();
				}
		    };

			var babyValidated = function () {
			    var $tables;
			    var dirty = false;

			    $tables = jq('fieldset#baby-information &gt; table:visible');
			    $tables.each(function () {
			    	$errorField = $(this).find('.baby-sex').find('span.error');
				    $errorField.html('').hide();
			    	$checkedBoxes = $(this).find('.baby-sex').find('input[type="radio"]').filter(function() {
			    		return this.checked == true;
			    	});

					if ($checkedBoxes.length == 0) {
						$errorField.html('Required field').show();
						dirty = true;
					} else {
						$errorField.html('').hide();					
					}
			    });

			    return !dirty;
			}


			var clearErrorMessages = function() {
	        	if($(this).val() != "") {
					$(this).siblings('span.error').html('').hide();
	        	}
	        }

	        $othersField.change(toggleOtherSpecify);

	        $viralLoadResultsField.change(viralLoadResultsChange);
	        $iycfField.change(iycfChange);
	        $arvsToMotherField.change(arvsToMotherChange);
	        $gestationWeeksField.change(setDelivery);
	        $diagnosisParentFields.change(diagnosisParentFieldsChange);
	        $diagnosisChildFields.change(diagnosisChildFieldsChange);
	        $encounterDateField.change(getHivStatus);
			$muacQuantitativeField.change(muacChange);
			$muacQualitativeField.change(muacChange);
	        $emtctCodeWomanField.change(function() {
	        	var emtctCode = getValue('emtct-code-woman.value');
	        	if (emtctCode == TRR_CONCEPT_ID || emtctCode == TRRK_CONCEPT_ID || emtctCode == TRRP_CONCEPT_ID || emtctCode == TRR_TICK_CONCEPT_ID) {
		        	hivStatusChange(HIV_POSITIVE_CONCEPT_ID);
	        	} else {
		        	hivStatusChange(HIV_NEGATIVE_CONCEPT_ID); 	
	        	}
	        });

			getHivStatus();
	        viralLoadResultsChange();
	        iycfChange();
	        arvsToMotherChange();
	        $diagnosisParentFields.each(diagnosisParentFieldsChange);
	        toggleOtherSpecify();

	        //Customize the datetimepicker field
	        fieldHelper.customizeDateTimePickerWidget('span.date-and-time');

	        jq('select,input').change(clearErrorMessages);

	        beforeSubmit.push(function(){
	            var valid = true;
	            var $errorMessageSpan = jq('span#error-message');

	            if (!viralLoadResultsValidate()) {
	                valid = false;
	            }

	            if (!apgarScoreValidate()) {
					valid = false;
	            }

	            if (!gravidaValidate()) {
	            	valid = false;
	            }

	            if (!parityValidate()) {
	            	valid = false;
	            }

	            if (!isOtherSelectedAndSpecified()) {
	            	valid = false;
	            }

	            if (jq('span.error.field-error:visible').length &gt; 0) {
	            	valid = false;
	            }

	            if (valid) {
	            	$errorMessageSpan.hide();
	            } else {
	            	$errorMessageSpan.show();
	            	jq().toastmessage('showErrorToast', "Form Validation failed. Check for errors");
	            }

	            return valid;
	        });

	    });

	    if (jQuery) {
	        jQuery(document).ready(function (jq) {
	            if (jq.browser.msie) {
	                jq(":checkbox").click(function () {
	                    jq(this).change();
	                });
	            }
	        });
	    }

		jQuery(document).ready(function(jq) {
			//Adding new form
			var $allTables,
				$otherTables,
				$firstTable,
				$thisTable,
				$nextTable,
				$hiddenTables,
				$lastVisibleTable,
				$nonEmptyBoxes;
	
			var showAddButtonForLastVisibleTable = function() {
				$lastVisibleTable = $('fieldset#baby-information &gt; table:visible:last');
				$lastVisibleTable.find('.add').show();
			};
				
			$allTables = jq('fieldset#baby-information &gt; table');
			$firstTable = jq('fieldset#baby-information &gt; table:first-of-type');
			$otherTables = jq('fieldset#baby-information &gt; table:not(:first-of-type)');
	
			<ifMode mode="ENTER">
				$otherTables.hide(); //Hide all rows apart from first row if adding new form
				$firstTable.find('.remove').hide(); //Hide the remove button from the first row
			</ifMode>
			
			<ifMode mode="EDIT">
				//Handle loading of existing obs
				$allTables.hide();
				$nonEmptyBoxes = jq('fieldset#baby-information input[type="radio"]').filter(function() {
				  return this.checked == true;
				});
				if ($nonEmptyBoxes.length &gt; 0 ) {
				  $nonEmptyBoxes.each(function() {
					$thisTable = jq(this).parents('table:first');
					$thisTable.show();
				  });
				  
				  if ($nonEmptyBoxes.length == 1) {
					$nonEmptyBoxes.parents('tr:first').find('.remove').hide(); //Hide the remove button if there is only one visible row
				  }
				  
				} else {
				  $firstTable.show();
				  $firstTable.find('.remove').hide();
				}
			</ifMode>
	
			jq('.add').click(function(e) { //Handle add button event
				e.preventDefault();
				$thisTable = jq(this).parents('table:first');
				$nextTable = $thisTable.next();
	
				if ($nextTable.length &gt; 0) {
					$nextTable.show('slow');
					$thisTable.find('.add').hide();
				}
				showAddButtonForLastVisibleTable();
			});
			
			jq('.remove').click(function(e) { //Handle remove button event
				e.preventDefault();
				if (confirm('Are you sure you want to remove this record? All fields for this record will be cleared.') == 1) {
					$thisTable = jq(this).parents('table:first');
					$thisTable.hide('slow', function() {
						showAddButtonForLastVisibleTable();
						fieldHelper.clearAllFields($thisTable);
					});
				}
			});			
		});
	</script>

  <div class="ai-page-frame">
    <div class="headers" style="text-align: center;">
      <h3 style="background: #000000; padding: 10px;color:#07c1ae">HMIS 072 Maternity Form</h3>
    </div>
    <fieldset>
      <legend>Admission Information</legend>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td>
            <p>
              <label>Date</label>
              <encounterDate default="today" disallowMultipleEncountersOnDate="block" />
              <span style="display: none;">
                <encounterLocation default="629d78e9-93e5-43b0-ad8a-48313fd99117" order="629d78e9-93e5-43b0-ad8a-48313fd99117" />
              </span>
            </p>
          </td>

          <td>
            <p>
              <label>IPD Number</label>
			  <obs conceptId="1646AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
            </p>
          </td>
          <td>
            <p>
              <label>ANC Number</label>
              <obs conceptId="c7231d96-34d8-4bf7-a509-c810f75e3329" />
            </p>
          </td>
          <td>
            <p>
              <label>REF Number</label>
              <obs conceptId="c9159851-557b-4c09-8942-65b7989aa20a" />
            </p>
          </td>
        </tr>
        <tr>
		  <td>
			<p>
			  <label>Type of patient:</label>
			  <obs conceptId="5282AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="977AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,5269AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="General,Private" style="radio"/>
			</p>
		  </td>
          <td>
            <p>
              <label>Gravida</label>
              <obs conceptId="dcc39097-30ab-102d-86b0-7a5022ba4115" id="gravida" />
            </p>
          </td>
          <td>
            <p>
              <label>Parity</label>
              <obs conceptId="1053AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="parity" />
            </p>
          </td>
          <td>
            <p>
              <label>Weeks of gestation</label>
              <obs conceptId="dca0a383-30ab-102d-86b0-7a5022ba4115" id="gestation-weeks"/>
            </p>
          </td>
        </tr>
		<tr>
		  <td>
			<p>
			  <label>Delivery</label>
				<obs conceptId="161033AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1395AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,129218AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Term,Preterm" style="dropdown" id="delivery"/>
			</p>
		  </td>
		  <td>
			<p>
			  <label>No. of previous cesarean sections</label>
			  <obs conceptId="160081AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
			</p>
		  </td>
		  <td colspan="2">
		  </td>
		</tr>
      </table>
    </fieldset>
    <fieldset>
      <legend>Final Diagnosis</legend>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
        	<td>
        		<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="164917" answerLabel="Abortion due to other causes" style="checkbox" class="parent-diagnosis" />
        		<span class="child-diagnoses">
	        		<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="120295" answerLabel="Complete" style="checkbox" class="horizontal-layout-options" />
	        		<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="112416" answerLabel="Threatening" style="checkbox" class="horizontal-layout-options" />
	        		<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="905" answerLabel="Missed" style="checkbox" class="horizontal-layout-options" />
	        		<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="164918" answerLabel="Uknown cause of abortion" style="checkbox" class="horizontal-layout-options" />
	        	</span>
        	</td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="dc69f6f5-30ab-102d-86b0-7a5022ba4115" answerLabel="Antepartum Haemorrhage (APH)" style="checkbox" class="parent-diagnosis" />
			<span class="child-diagnoses">
            	<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="130108" answerLabel="Placental abruption" style="checkbox" class="horizontal-layout-options" />
            	<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="114127" answerLabel="Placenta praevia" style="checkbox" class="horizontal-layout-options" />
            	<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="130123" answerLabel="Placenta  percreta" style="checkbox" class="horizontal-layout-options" />
            </span>          
      		</td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="dc650021-30ab-102d-86b0-7a5022ba4115" answerLabel="Postpartum Hemorrhage (PPH)" style="checkbox" class="parent-diagnosis" />
            <span class="child-diagnoses">
	            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="dc650021-30ab-102d-86b0-7a5022ba4115" answerLabel="Primary" style="checkbox" class="horizontal-layout-options" />
	            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="126877" answerLabel="Secondary" style="checkbox" class="horizontal-layout-options" />
	        </span>
          </td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="dc55064a-30ab-102d-86b0-7a5022ba4115" answerLabel="High blood pressure in pregnancy" style="checkbox" class="parent-diagnosis" />
            <span class="child-diagnoses">
	            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="118744" answerLabel="Eclampsia" style="checkbox" class="horizontal-layout-options" />
	            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="129251" answerLabel="Pre-eclampsia" style="checkbox" class="horizontal-layout-options" />
	            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="113006" answerLabel="Severe pre-eclampsia" style="checkbox" class="horizontal-layout-options" />
	        </span>
          </td>
        </tr>
        <tr>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="dc6504d3-30ab-102d-86b0-7a5022ba4115" answerLabel="Abortions" style="checkbox" />
          </td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="135361AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Malaria in pregnancy" style="checkbox" />
          </td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="115036AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Obstructed Labour" style="checkbox" />
          </td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="130AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Puerperal sepsis" style="checkbox" />
          </td>
        </tr>
        <tr>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="dc69ec17-30ab-102d-86b0-7a5022ba4115" answerLabel="Sepsis related to pregnancy" style="checkbox" />
          </td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="148834AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Anaemia in pregnancy" style="checkbox" />
          </td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="127259AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Ruptured uterus" style="checkbox" />
          </td>
          <td>
            <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="dc550257-30ab-102d-86b0-7a5022ba4115" answerLabel="Ectopic pregnancy" style="checkbox" />
          </td>
        </tr>
        <tr>
			<td>
				<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="164916" answerLabel="Abortion due to Gender based Violence" style="checkbox" />
			</td>
			<td>
				 <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="129211" answerLabel="Premature rapture of Membranes" style="checkbox" />
			</td>
			<td>
				<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="142478AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Pregnancy induced diabetes melitus" style="checkbox"  />
			</td>
			<td>
				<obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptId="5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Other" showCommentField="true" commentFieldLabel="&lt;label&gt;Specify&lt;/label&gt;" style="checkbox" class="has-comment" />
			</td>
        </tr>
      </table>
    </fieldset>
    <fieldset>
      <legend>HIV Information</legend>
      <table width="100%" border="0" cellspacing="0" cellpadding="0" id="hiv-information-section">
        <tr>
          <td colspan="2">
            <p>
              <label>eMTCT Code: Woman</label>
              <obs conceptId="d5b0394c-424f-41db-bc2f-37180dcdbe74" 
              	answerConceptIds="6da9b915-8668-4642-8ed4-7d2a346881cb,
				              	05f16fc5-1d82-4ce8-9b44-a3125fbbf2d7,
				              	86e394fd-8d85-4cb3-86d7-d4b9bfc3e43a,
				              	a08d9331-b437-485c-8eff-1923f3d43630,
				              	25c448ff-5fe4-4a3a-8c0a-b5aaea9d5465,
				              	60155e4d-1d49-4e97-9689-758315967e0f,
				              	48723c9c-c931-4fde-81cd-6178c9a9a70b,
				              	4d301db0-c517-4556-9f7c-d837bac90144"
              	answerLabels=	"C - Counselled but declined HIV testing,
              					T - Counselled and tested but didn't receive results,
              					TR - Counselled tested and results given - Client tested HIV - in maternity,
              					TR+ - Tested HIV- on retest,
              					TRR - Counselled tested and results given - Client tested HIV + in maternity,
              					TRR+ - Client was originally negative but sero-converted at this test,
              					TR&#8730; - Clients who came for delivery with HIV Negative Status done during this pregnancy,
              					TRR&#8730; - Clients who came to HIV Positive after testing in during this pregnancy" 
	                style="dropdown" required="true" class="emtct-code" id="emtct-code-woman" />
            </p>
          </td>
          <td colspan="2">
            <p>
              <label>eMTCT Code: Partner</label>
              <obs conceptId="62a37075-fc2a-4729-8950-b9fae9b22cfb" 
              	answerConceptIds="6da9b915-8668-4642-8ed4-7d2a346881cb,
				              	05f16fc5-1d82-4ce8-9b44-a3125fbbf2d7,
				              	86e394fd-8d85-4cb3-86d7-d4b9bfc3e43a,
				              	a08d9331-b437-485c-8eff-1923f3d43630,
				              	25c448ff-5fe4-4a3a-8c0a-b5aaea9d5465,
				              	60155e4d-1d49-4e97-9689-758315967e0f,
				              	48723c9c-c931-4fde-81cd-6178c9a9a70b,
				              	4d301db0-c517-4556-9f7c-d837bac90144,
				              	8eab745c-24a5-4ba4-906c-b5087e920b66" 
              	answerLabels="C - Counselled but declined HIV testing,
              					T - Counselled and tested but didn't receive results,
              					TR - Counselled tested and results given - Client tested HIV - in maternity,
              					TR+ - Tested HIV- on retest,
              					TRR - Counselled tested and results given - Client tested HIV + in maternity,
              					TRR+ - Client was originally negative but sero-converted at this test,
              					TR&#8730; - Clients who came for delivery with HIV Negative Status done during this pregnancy,
              					TRR&#8730; - Clients who came to HIV Positive after testing in during this pregnancy, 
	              				Not Tested"
	                style="dropdown" class="emtct-code" id="emtct-code-partner" />
            </p>
          </td>
        </tr>
        <tr>
          <td>
            <p>
              <label>WHO Clinical Stage</label>
              <obs conceptId="dcdff274-30ab-102d-86b0-7a5022ba4115"
                   answerConceptIds="dcda2bc2-30ab-102d-86b0-7a5022ba4115,dcda3251-30ab-102d-86b0-7a5022ba4115,dcda3663-30ab-102d-86b0-7a5022ba4115,dcda3a80-30ab-102d-86b0-7a5022ba4115,dd25e735-30ab-102d-86b0-7a5022ba4115,dd2666a5-30ab-102d-86b0-7a5022ba4115,dd266d64-30ab-102d-86b0-7a5022ba4115,dd269c18-30ab-102d-86b0-7a5022ba4115"
                   answerLabels="1,2,3,4,T1,T2,T3,T4" style="dropdown" />
            </p>
          </td>
          <td>
            <p>
              <label>CD4 Date</label>
              <obs conceptId="159376AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="false" />
            </p>
          </td>
          <td>
            <p>
              <label>CD4 Count</label>
              <obs conceptId="dcbcba2c-30ab-102d-86b0-7a5022ba4115" />
            </p>
          </td>
          <td></td>
        </tr>
        <tr>
          <td>
            <p>
              <label>Viral Load Date</label>
              <obs conceptId="0b434cfa-b11c-4d14-aaa2-9aed6ca2da88" allowFutureDates="false"/>
            </p>
          </td>
          <td>
            <p>
              <label>Viral Load Results</label>
              <obs conceptId="dca12261-30ab-102d-86b0-7a5022ba4115" answerConceptIds="dca1269d-30ab-102d-86b0-7a5022ba4115,dca10c94-30ab-102d-86b0-7a5022ba4115,dca11907-30ab-102d-86b0-7a5022ba4115" answerLabels="Not Detected,Detected,Sample Rejected" style="dropdown" id="viral-load-results" />
            </p>
          </td>
          <td>
            <p>
              <label>Viral Load (copies/ml)</label>
              <obs conceptId="dc8d83e3-30ab-102d-86b0-7a5022ba4115" id="viral-load" />
            </p>
          </td>
          <td>
          	<p>
          		<label>Viral Load Status</label>
          		<obs 	conceptId="fcb5ef91-ad8f-44bc-ac5f-9ffb29881e59" 
          				answerConceptIds="a4089d8e-9ea6-4fff-b273-415c6640203a,f56e8d46-5b2f-488b-861a-94a89d16adf6"
          				answerLabels="Suppressed,Non-suppressed" id="viral-load-status" />
          	</p>
          </td>
        </tr>
      </table>
    </fieldset>
    <fieldset>
      <legend>Delivery Information</legend>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td>
            <p>
              <label>Mode of delivery/Delivery Management</label>
              <obs conceptId="dcc3ac63-30ab-102d-86b0-7a5022ba4115" answerConceptIds="dc9aee12-30ab-102d-86b0-7a5022ba4115,dc9af278-30ab-102d-86b0-7a5022ba4115,dc9af8cf-30ab-102d-86b0-7a5022ba4115,0031cf08-4508-40dd-92ca-d4f48ac6509c,1637AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,e1c4f528-aab8-4818-b040-36dbdeb46858,dcdd95c5-30ab-102d-86b0-7a5022ba4115,5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                   answerLabels="Spontaneous Vaginal Delivery/Extraction,Cesarean Section,Breech Delivery,Asisted Delivery,Manual Vacuum Aspiration,Dilation and Curettage (D &amp; C),Laparatomy,Hysterectomy,Other" style="dropdown" />
            </p>
          </td>
          <td>
            <p>
              <label>Date of delivery</label>
              <obs conceptId="f9573837-6a9b-4f2f-9298-aecf27b15fb3" allowTime="true" class="date-and-time" required="false"/>
            </p>
          </td>
          <td>
		    <obsgroup groupingConceptId="163505AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
			  <p>
				<label>Duration of 1st stage (mins):</label>
				<obs conceptId="159616AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  />
			  </p>
			</obsgroup>
			<obsgroup groupingConceptId="163506AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
			  <p>
				<label>Duration of 2nd stage (mins):</label>
				<obs conceptId="159616AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
			  </p>
			  </obsgroup>
		  </td>
          <td>
            <p>
              <label>Management of 3rd stage labour</label>
              <obs conceptId="425458af-d1f7-40e4-a672-7d9e38aedb3c" answerConceptId="e123d685-812a-43c3-bc05-db4e14d8c05c" answerLabel="1 - Ergometrine" class="horizontal-layout-options" />
              <obs conceptId="425458af-d1f7-40e4-a672-7d9e38aedb3c" answerConceptId="eca9da28-31d3-4e6f-828d-441e9237b7a5" answerLabel="2 - Oxtocin (Pitocin)" class="horizontal-layout-options" />
              <obs conceptId="425458af-d1f7-40e4-a672-7d9e38aedb3c" answerConceptId="1c4323a3-6cc6-44d0-81ee-839014bca19c" answerLabel="3 - Misoprostol" class="horizontal-layout-options" />
            </p>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <p>
              <label>Other treatment given</label>
              <obs conceptId="0aea6828-2328-4038-9cd9-680dbdf29790" rows="5" cols="30" />
            </p>
          </td>
          <td>
            <p>
              <label>ARVs to mother</label>
              <obs 	conceptId="35ae2043-a3b0-48de-8e22-05f377ac39a2"
					  answerConceptIds="026e31b7-4a26-44d0-8398-9a41c40ff7d3,2c000b41-f9d7-40c1-8de0-bce91dbae932,dc9b0596-30ab-102d-86b0-7a5022ba4115,dc9825cf-30ab-102d-86b0-7a5022ba4115"
					  answerLabels="ART - Initiated on ART for eMTCT in Maternity,ART&#8730; - Already on ARVs,NA - Not Applicable,ND - No drugs given"
					  style="dropdown" id="arvs-to-mother" />
            </p>
          </td>
          <td>
            <p>
              <label>Pre-ART number</label>
              <span id="pre-art-number">
                <patient field="identifier" identifierTypeId="e1731641-30ab-102d-86b0-7a5022ba4115"
                         required="false" />
              </span>
            </p>
          </td>
        </tr>
		<tr>
		  <td>
		 	<p>
				<label>Vit A Supplement</label>
				<obs conceptId="88ec2c8b-eb7b-4595-8612-1871568507a5" answerConceptIds="1065,1066" answerLabels="Yes,No" style="radio" />
			</p>
		  </td>
		  <td>
			<p>
		    	<label>M.U.A.C (cm)</label>
				<obs conceptId="1343AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="muac-quantitative" />
			</p>
		  </td>
		  <td>
		 	<p>
				<label>M.U.A.C</label>
				<includeIf velocityTest="$patient.age &lt; 5">
					<obs conceptId="5f86d19d-9546-4466-89c0-6f80c101191b"
					 answerConceptIds="de330d01-5586-4eed-a645-e04b6bd13701,a3b1734c-4743-4b9d-8e71-08d0459d29b9,8846c03f-67bf-4aeb-8ca7-39bf79b4ebf3"
					 answerLabels="Red &lt; 11.5cm, Yellow 11.5cm - &lt;12.5cm,Green &gt;= 12.5cm" id="muac-qualitative" />
				</includeIf>
				<includeIf velocityTest="$patient.age &lt; 10 &amp;&amp; $patient.age &gt;=5">
					<obs conceptId="5f86d19d-9546-4466-89c0-6f80c101191b"
					 answerConceptIds="de330d01-5586-4eed-a645-e04b6bd13701,a3b1734c-4743-4b9d-8e71-08d0459d29b9,8846c03f-67bf-4aeb-8ca7-39bf79b4ebf3"
					 answerLabels="Red &lt; 13.5cm,Yellow 13.5cm - &lt;14.5cm,Green &gt;=14.5cm" id="muac-qualitative" />
				</includeIf>
				<includeIf velocityTest="$patient.age &lt; 18 &amp;&amp; $patient.age &gt;=10">
					<obs conceptId="5f86d19d-9546-4466-89c0-6f80c101191b"
					 answerConceptIds="de330d01-5586-4eed-a645-e04b6bd13701,a3b1734c-4743-4b9d-8e71-08d0459d29b9,8846c03f-67bf-4aeb-8ca7-39bf79b4ebf3"
					 answerLabels="Red &lt; 16.5cm, Yellow 16.5cm - &lt;19.0cm,Green &gt;=19.0cm" id="muac-qualitative" />
				</includeIf>
				<includeIf velocityTest="$patient.age &gt;=18">
					<obs conceptId="5f86d19d-9546-4466-89c0-6f80c101191b"
					 answerConceptIds="de330d01-5586-4eed-a645-e04b6bd13701,a3b1734c-4743-4b9d-8e71-08d0459d29b9,8846c03f-67bf-4aeb-8ca7-39bf79b4ebf3"
					 answerLabels="Red &lt;19.0cm , Yellow 19.0cm - &lt;22.0cm,Green &gt;=22.0cm" id="muac-qualitative" />
				</includeIf>
			</p>
		  </td>
		  <td>
			<p>
			  <label>Integrated Nutrition Register No.</label>
			  <obs conceptId="b644c29c-9bb0-447e-9f73-2ae89496a709" id="inrNumber" />
			</p>
		  </td>
		</tr>
		<tr>
		  <td>
		    <p>
			  <label>Blood loss (mls)</label>
			  <obs conceptId="161928AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
			</p>
		  </td>
		  <td>
			<p>
			  <label>Placenta weight (kgs)</label>
			  <obs conceptId="0d89a66c-2d8f-4aed-8fc9-1ba123edb8a8" />
			</p>
		  </td>
		  <td colspan="2"></td>
		</tr>
      </table>
    </fieldset>
    <fieldset id="baby-information">
      <legend>Baby Information</legend>
      	<repeat>
			<template>
				<obsgroup groupingConceptId="163458AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
			      <table width="100%" border="0" cellspacing="0" cellpadding="0">
			      	<thead>
			      		<th colspan="4">Baby #{babyNo}</th>
			      	</thead>
			      	<tbody>
				        <tr>
							<td>
								<p>
								  <label>Sex</label>
								  <obs conceptId="1587AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerConceptIds="1535AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1534AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Female,Male" style="radio" class="baby-sex" />
								</p>
							</td>
							<td>
								<label>Asphyxia</label>
								<obs 	conceptId="121397" 
										answerConceptIds="1065,1066" 
										answerLabels="Yes,No" style="radio" />
							</td>
							<td>
								<p>
								  <label>Apgar score 1st Minute</label>
								  <obs conceptId="056ee92e-3104-4529-8f83-70580e0f4501" id="apgar-score" answers="1,2,3,4,5,6,7,8,9,10" answerLabels="1/10,2/10,3/10,4/10,5/10,6/10,7/10,8/10,9/10,10/10" />
								</p>
							</td>
							<td>
								<p>
								  <label>Apgar score 5th Minute</label>
								  <obs conceptId="015ab92b-c5de-40cc-903d-21612bf4d9ab" id="apgar-score" answers="1,2,3,4,5,6,7,8,9,10" answerLabels="1/10,2/10,3/10,4/10,5/10,6/10,7/10,8/10,9/10,10/10" />
								</p>
							</td>
				        </tr>
				        <tr>
							<td>
								<label>
								  Not breathing at birth
								</label>
								<obs conceptId="dc958e5c-ab9b-4c0c-b02d-d136b7505754" 
									answerConceptIds="911808cd-f455-4a63-9e18-aeee1f74adf0,e6004c96-2eaf-41f4-874e-6c3203bc1c40,d5ff53b2-1821-43e5-9abe-8c5e86d9639b"
								    answerLabels="SS - If baby breathes after Stimulation/and or Suction procedure,
								                  BM - If baby breathes after bag and mask prodecure,
								                  BMD - If baby dies after bag and mask procedure" 
								    style="dropdown" />
							</td>
							<td>
								<p>
								  <label>
								    Immediate skin to skin contact?
								  </label>
								  <obs conceptId="be4b37fc-4197-4a4e-913d-0d8f3babdffd" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes, No" style="radio" class="horizontal-layout-options" />
								</p>
							</td>
							<td>
								<label>Breastfed within 1 hour?</label>
								<obs conceptId="a4063d62-a936-4a26-9c1c-a0fb279a71b1" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes, No" style="radio" class="horizontal-layout-options" />
							</td>
							<td></td>

				        </tr>
				        <tr>
				          <td rowspan="2">
				            <p>
				              <label>Routine medication</label>
				            </p>
				          </td>
				          <td>
				            <obs conceptId="673d99cc-79a9-45a6-ba84-ecd3e9e793ef" answerConceptId="dc73ee9c-30ab-102d-86b0-7a5022ba4115" answerLabel="TEO - Tetracycline Eye Ointment" style="checkbox" />
				          </td>
				          <td>
				            <obs conceptId="673d99cc-79a9-45a6-ba84-ecd3e9e793ef" answerConceptId="64533b34-1c86-48e0-85a5-5d5a1aab97ce" answerLabel="Vitamin K" style="checkbox" />
				          </td>
				          <td>
				            <obs conceptId="673d99cc-79a9-45a6-ba84-ecd3e9e793ef" answerConceptId="5af778c9-ae5e-4fa7-8a6b-5e1844236691" answerLabels="Chlorhexidine" style="checkbox" />
				          </td>
				        </tr>
				        <tr>
				          <td colspan="3">
				            <obs conceptId="673d99cc-79a9-45a6-ba84-ecd3e9e793ef" answerConceptId="5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Other" style="checkbox" showCommentField="true" commentFieldLabel="&lt;label&gt;Specify&lt;/label&gt;"  class="has-comment"/>
				          </td>
				        </tr>
				        <tr>
				          <td>
				            <label>
				              Counselling at discharge
				            </label>
				            <obs conceptId="3095d500-4a3e-4cf3-ab96-6f406e0d371d" answerConceptIds="162936,162937" answerLabels="Counselled (C), Not Counselled (NC)" style="radio" class="vertical-layout-options" />
				          </td>
				          <td>
				            <label>
				              Maternal nutritional couselling at discharge
				            </label>
				            <obs conceptId="af7dccfd-4692-4e16-bd74-5ac4045bb6bf" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes, No" style="radio" class="horizontal-layout-options" />
				          </td>
				          <td>
				            <label>
				              Infant and young child feeding (IYCF)
				            </label>
				            <obs conceptId="5d993591-9334-43d9-a208-11b10adfad85" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes, No" id="iycf" style="radio" class="horizontal-layout-options" />
				          </td>
				          <td>
				            <p>
				              <label>
				                Infant feeding option
				              </label>
				              <obs conceptId="dc9a00a2-30ab-102d-86b0-7a5022ba4115" answerConceptIds="dcbd637e-30ab-102d-86b0-7a5022ba4115,40fdb5b6-e8ac-424d-988c-f2f2937348db,dcd5487d-30ab-102d-86b0-7a5022ba4115" answerLabels="EBF-Exclusive Breast Feeding, RP-Replacement feeding,MF-Mixed feeding" id="infant-feeding-option" style="radio" class="vertical-layout-options" />
				            </p>
				          </td>
				        </tr>
				        <tr>
				          <td>
				            <p>
				              <label>ARVs administered to baby</label>
				              <obs conceptId="9e825e42-be00-4d4d-8774-257ddb29581b" answerConceptIds="dc9b0596-30ab-102d-86b0-7a5022ba4115,04711d8f-c60d-4b1c-9451-0b32debbb8b0" answerLabels="NA, NVP Syrup" id="arvs-administered-to-baby" style="radio" class="horizontal-layout-options" />
				            </p>
				          </td>
				          <td>
				            <p>
				              <label>Baby weight</label>
				            </p>
				            <obs conceptId="dcce847a-30ab-102d-86b0-7a5022ba4115" />
				          </td>
				          <td>
				            <label>Immunized against Polio?</label>
				            <obs conceptId="dc918618-30ab-102d-86b0-7a5022ba4115" answerConceptId="dc883964-30ab-102d-86b0-7a5022ba4115" style="checkbox" answerLabel="" />
				          </td>
				          <td>
				            <label>Immunized against BCG?</label>
				            <obs conceptId="dc918618-30ab-102d-86b0-7a5022ba4115" answerConceptId="dc8e1be9-30ab-102d-86b0-7a5022ba4115" style="checkbox" answerLabel="" />
				          </td>
				        </tr>
				        <tr>
							<td colspan="4">
								<p>
								  <label><strong>Condition of baby on discharge</strong></label>
								</p>
							</td>
						</tr>
						<tr>
							<td>
							  <obs conceptId="a5638850-0cb4-4ce8-8e87-96fc073de25d" answerConceptId="fda5ad21-6ba4-4526-a0f3-ea1269d43422" answerLabel="MSB - Macerated still birth" class="horizontal-layout-options" />
							</td>
							<td>
							  <obs conceptId="a5638850-0cb4-4ce8-8e87-96fc073de25d" answerConceptId="7a15616a-c12a-44fc-9a11-553639128b69" answerLabel="FSB - Fresh still birth" />
							</td>
							<td colspan="2">
							  <obs conceptId="a5638850-0cb4-4ce8-8e87-96fc073de25d" answerConceptId="ab3a7679-f5ee-48d6-b690-f55a1dfe95ea" answerLabel="NND - Immediate neonatal death (Death within 24 hours)" />
							</td>
						</tr>
						<tr>
							<td>
							  <obs conceptId="a5638850-0cb4-4ce8-8e87-96fc073de25d" answerConceptId="eb7041a0-02e6-4e9a-9b96-ff65dd09a416" answerLabel="AL - Alive baby" class="horizontal-layout-options" />
							</td>
							<td>
							  <obs conceptId="a5638850-0cb4-4ce8-8e87-96fc073de25d" answerConceptId="23ac7575-f0ea-49a5-855e-b3348ad1da01" answerLabel="BDF - Baby born with defect" />
							</td>
							<td colspan="2">
								<obs conceptId="a5638850-0cb4-4ce8-8e87-96fc073de25d" answerConceptId="161936AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="ICU - In Intensive care unit" />
							</td>
				        </tr>
				        <tr>
				          <td>
				            <p>
				              <label>PNC at 6H for child</label>
				              <obs conceptId="93ca1215-5346-4fde-8905-84e930d9f1c1" />
				            </p>
				          </td>
				          <td colspan="3"></td>
				        </tr>
			        </tbody>
			        <tfoot>
				        <tr>
				        	<td></td>
				        	<td></td>
				        	<td colspan="2"><a href="#" class="add">Add Baby</a> | <a href="#" class="remove">Remove Baby</a></td>        	
				        </tr>
			        </tfoot>
			      </table>	
				</obsgroup>
			</template>
			<render babyNo="1" />
			<render babyNo="2" />
			<render babyNo="3" />
			<render babyNo="4" />
			<render babyNo="5" />
		</repeat>
    </fieldset>
    <fieldset>
      <legend>Discharge Information</legend>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td colspan="3">
            <p>
              <label><strong>Family planning method</strong></label>
            </p>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="dcb2fba9-30ab-102d-86b0-7a5022ba4115"
                 answerLabel="1. Post Partum female sterilization (Bilateral Tubal Ligation (PP - BTL))"/>
          </td>
          <td>
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="fed07c37-7bb6-4baa-adf9-596ce4c4e93c"
               answerLabel="2. Post Partum IUD (PP-IUD)"/>
          </td>
        </tr>
        <tr>
          <td>
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="dd4c3016-13cf-458a-8e93-fe54460be667"
             answerLabel="3. IUD as part of post abortion care (PAC - IUD)"/>
          </td>
          <td>
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="bb83fd9d-24c5-4d49-89c0-97e13c792aaf"
               answerLabel="4. Implant as part of post abortion care" class="parent-diagnosis"/>
            <span class="child-diagnoses">
	            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="efbe5bf3-3411-4949-855b-636ada05f5e7"
	               answerLabel="Combined Oral Contraceptive (COS)" class="horizontal-layout-options" />
	            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="82624AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
	               answerLabel="Progestogen-Only(POP) Contraceptive Pill" class="horizontal-layout-options"/>
            </span>
          </td>
          <td>
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="336650b2-65f7-4202-80eb-3c6437878262"
               answerLabel="5. Oral pills as part of post abortion care"/>
          </td>
        </tr>
        <tr>
          <td>
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="3e18cafc-8edc-4648-94b3-835de371a2f2"
               answerLabel="6. Depo as part of post abortion care"/>
          </td>
          <td colspan="2">
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
               answerLabel="7. Other Family Planning method" showCommentField="true" commentFieldLabel="&lt;label&gt;Specify&lt;/label&gt;"  class="has-comment"/>
          </td>
        </tr>
        <tr>
          <td>
            <obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="aaf150a5-92d2-416f-8254-95d34ed9c4ab"
               answerLabel="8.Not Family Planning Method Given"/>
          </td>
          <td>
          	<obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="dc692ad3-30ab-102d-86b0-7a5022ba4115"
               answerLabel="Condoms"/>          	
          </td>
          <td>
          	<obs conceptId="dc7620b3-30ab-102d-86b0-7a5022ba4115" answerConceptId="aa14bbbb-cbbe-445d-8958-9f521220b0fd"
               answerLabel="Moon beads"/>          	
          </td>
        </tr>
    </table>
    <table>
        <tr>
		<td>
			<p>
			  <label>Condition of mother on discharge</label>
			  <obs conceptId="e87431db-b49e-4ab6-93ee-a3bd6c616a94" answerConceptIds="3f02ee62-613d-4eba-88bc-d0cd66b863c5,17fcfd67-a1a2-4361-9915-ad4e81a7a61d,6e4f1db1-1534-43ca-b2a8-5c01bc62e7ef,dd27a783-30ab-102d-86b0-7a5022ba4115,6d15f334-2130-47a8-b5a2-3b26b6a65c69,792fe1f6-262e-4266-9226-63fe74268279,4095ac37-4955-4718-8e3e-b6f6fb55cf6d,862b583e-97ba-4bef-8997-5a460449a87a"
			       answerLabels="D - Woman discharged alive,DD- Woman died,R - If the woman ran away or left before being discharged,T- Woman transferred to another facility,DF - Woman discharged alive with fistula,DDF - Woman died with fistula,RF- Woman ran away with fistula,TF - Woman transferred with fistula" style="dropdown" />
			</p>
		</td>
		<td>
			<p>
			  <label>PNC at 6H for mother</label>
			  <obs conceptId="f0d21d70-986e-43ed-b72b-98c693c15f84" />
			</p>
		</td>
		<td>
			<p>
			  <label>Delivered by</label>
			  <encounterProviderAndRole encounterRole="240b26f9-dd88-4172-823d-4a8bfeb7841f" id="delivered-by" required="false" />
			</p>
		</td>
	  </tr>
      <tr>
    	<td>
			<p>
			  <label>Date of discharge</label>
			  <obs conceptId="ff31a419-0eb1-45fc-920a-77b4a3481e00" />
			</p>
		</td>
          <td>
            <p>
              <label>Name of person discharging</label>
			  <encounterProviderAndRole encounterRole="a0b03050-c99b-11e0-9572-0800200c9a66" id="person-discharging" required="false" />
            </p>
          </td>
          <td colspan="2"></td>
        </tr>
      </table>
    </fieldset>
    <section></section>
    <section>
      <submit />
      <span style="clear:none;float:none;margin:5px;display: none;" class="error1" id="error-message">
      	You have errors in your form, please scroll up to see them.
      </span>
    </section>
  </div>
</htmlform>