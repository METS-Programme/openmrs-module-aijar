<htmlform>
    <macros>
        headerColor =#8fabc7
        fontOnHeaderColor = white
    </macros>
    <style>


        #inner
        {
        width:100%;
        border-collapse:collapse;
        //background-color: #EDF2F7
        border: solid 1px #85b1de;
        font-size:16px;
        padding:1px;
        //border:2px solid gray;
        bord
        er:solid 2px #85b1de ;
        margin:2px;
        }

        #second
        {
        position: absolute;
        left: 230px;
        overflow:auto;
        }

        #third
        {
        position: absolute;
        left: 333px;
        overflow:auto;
        }

        #fourth
        {
        position: absolute;
        left: 510px;
        overflow:auto;
        }

        #fifth
        {
        position: absolute;
        left: 740px;
        overflow:auto;
        }
        #inner tr
        {
        padding:1px;
        border:2px solid gray;
        margin:2px;
        }


        #inner th
        {
        font-size:18px;
        text-align:center;
        padding-top:4px;
        padding-bottom:4px;
        background-color:#8fabc7;
        color:#ffffff;
        }


        #inner td, span
        {
        background-color: #EDF2F7
        border: solid 1px #85b1de;
        font-size:15px;
        text-align:center;
        color: solid black;
        }

        #inner add
        {
        font-size:15px;
        text-align:left;
        color: solid blue;
        }

        #inner_most
        {

        margin:0px;
        font-size:14px;
        padding-top:1px;
        padding-bottom:1px;

        }

        #inner_most tr
        {
        border:1px solid gray;
        margin:0px;
        }

        #inner_most th
        {

        font-size:14px;
        text-align:center;
        padding-top:1px;
        padding-bottom:1px;
        background-color:#8fabc7;
        color:#ffffff;
        }


        #inner1
        {
        width:60%;
        border-collapse:collapse;
        //background-color: #EDF2F7
        border: solid 1px #85b1de;
        font-size:16px;
        padding:1px;
        //border:2px solid gray;
        border:solid 2px #85b1de ;
        margin:2px;
        }

        #inner1 tr
        {
        padding:1px;
        border:2px solid gray;
        margin:2px;
        }


        #inner1 th
        {
        font-size:18px;
        text-align:center;
        padding-top:4px;
        padding-bottom:4px;
        background-color:#8fabc7;
        color:#ffffff;
        }


        #inner1 td, span
        {
        background-color: #EDF2F7
        border: solid 1px #85b1de;
        font-size:15px;
        text-align:center;
        color: solid black;
        }

        #inner1 add
        {
        font-size:15px;
        text-align:left;
        color: solid blue;
        }
    </style>
    <script type="text/javascript" src="../../scripts/jquery/jquery-1.3.2.min.js"></script>
    <!-- jquery loaded for nonessential purposes. -->
    <script type="text/javascript">

        function enable_disable_fm(selected_option){

        var class_name = $(selected_option).attr("class") ;

        var length = class_name.length;

        var class_id = parseInt(class_name.substring(length-1, length))

        var row_id = class_id;

        var disable = true;

        var row_1 = '[class^="FamilyMember"][class*="Children1"]';
        var row_2 = '[class^="FamilyMember"][class*="Children2"]';
        var row_3 = '[class^="FamilyMember"][class*="Children3"]';
        var row_4 = '[class^="FamilyMember"][class*="Children4"]';


        var xx = row_1;
        var selected_value = $(selected_option).find(":selected").text()


        switch(selected_value){
        case "P":
        case "Y":
        disable = false;
        break;

        }


        switch(row_id){
        case 1:
        xx = row_1;
        break;
        case 2:
        xx = row_2;
        break;
        case 3:
        xx = row_3;
        break;
        case 4:
        xx = row_4;
        break;

        }


        $(xx).each(function(){
        var group = $(this);

        if( class_name.indexOf('Children') == -1)
        {

        group.find("input").attr("disabled",disable );
        group.find('select').attr("disabled",disable );

        //if (disable )
        //group.find("input[type$='text']").val("");


        }
        else if(class_name.indexOf('GrandChildren') == -1) {
        // if (disable )
        // group.find("input[type$='text']").val("");

        group.find("input").attr("disabled",disable );
        }

        });

        }

        function enable_disable_ei(selected_option){

        var class_name = $(selected_option).attr("class") ;

        var length = class_name.length;

        var class_id = parseInt(class_name.substring(length-1, length))

        var row_id = class_id;

        var disable = true;

        var row_1 = '[class^="ExposedInfant"][class*="Children1"]';
        var row_2 = '[class^="ExposedInfant"][class*="Children2"]';
        var row_3 = '[class^="ExposedInfant"][class*="Children3"]';
        var row_4 = '[class^="ExposedInfant"][class*="Children4"]';

        var xx = row_1;
        var selected_value = $(selected_option).find(":selected").text()

        if (selected_value == "P")
        disable = false;

        switch(row_id){
        case 1:
        xx = row_1;
        break;
        case 2:
        xx = row_2;
        break;
        case 3:
        xx = row_3;
        break;
        case 4:
        xx = row_4;
        break;

        }


        $(xx).each(function(){
        var group = $(this);

        if( class_name.indexOf('Children') == -1)
        {
        group.find("input").attr("disabled",disable );

        //if (disable )
        //group.find("input[type$='text']").val("");

        }

        });

        }


        function enable_disable_ac(selected_option){

        var class_name = $(selected_option).attr("class") ;

        var length = class_name.length;

        var class_id = parseInt(class_name.substring(length-1, length))

        var row_id = class_id;

        var disable = true;

        var row_1 = '[class^="ArtCare"][class*="Child1"]';
        var row_2 = '[class^="ArtCare"][class*="Child2"]';
        var row_3 = '[class^="ArtCare"][class*="Child3"]';
        var row_4 = '[class^="ArtCare"][class*="Child4"]';

        var row_5 = '[class^="ArtCare"][class*="Child5"]';
        var row_6 = '[class^="ArtCare"][class*="Child6"]';
        var row_7 = '[class^="ArtCare"][class*="Child7"]';
        var row_8 = '[class^="ArtCare"][class*="Child8"]';

        var row_9 = '[class^="ArtCare"][class*="Child9"]';

        var xx = row_1;
        var selected_value = $(selected_option).find(":selected").text()

        selected_value = selected_value.trim().toUpperCase();

        if (selected_value == "OTHER")
        disable = false;

        switch(row_id){
        case 1:
        xx = row_1;
        break;
        case 2:
        xx = row_2;
        break;
        case 3:
        xx = row_3;
        break;
        case 4:
        xx = row_4;
        break;

        case 5:
        xx = row_5;
        break;
        case 6:
        xx = row_6;
        break;
        case 7:
        xx = row_7;
        break;
        case 8:
        xx = row_8;
        break;
        case 9:
        xx = row_9;
        break;


        }


        $(xx).each(function(){
        var group = $(this);

        if( class_name.indexOf('Child') == -1)
        {
        group.find("input").attr("disabled",disable );

        //if (disable )
        //group.find("input[type$='text']").val("");

        }

        });

        }


        if(jQuery){
        $(document).ready(function(){
        if ( $.browser.msie ) {
        $(":checkbox").click(function(){
        $(this).change();
        });
        }

        $("#comfirmedDate").change(function() {

        alert($(this).find("input[type$='text']").val() );

        });

        $('[class^="FamilyMemberEnableDisable"]').change(function() {
        enable_disable_fm($(this));
        });

        $('[class^="FamilyMemberEnableDisable"]').each(function(){
        enable_disable_fm( $(this));
        });


        $('[class^="ExposedInfantEnableDisable"]').change(function() {
        enable_disable_ei($(this));
        });


        $('[class^="ExposedInfantEnableDisable"]').each(function(){
        enable_disable_ei( $(this))
        });

        $('[class^="ArtCareEnableDisable"]').change(function() {
        enable_disable_ac($(this));
        });


        $('[class^="ArtCareEnableDisable"]').each(function(){
        enable_disable_ac( $(this))
        });

        $(".enableDisable").each(function(){
        var group = $(this);
        function disableFn(){
        group.children("#disabled").fadeTo(250,1);
        group.children("#disabled").find(":checkbox").attr("checked",false); //uncheck
        // group.children("#disabled").find("input[type$='text']").val("");
        group.children("#disabled").find("input").attr("disabled",true); //disable
        group.children("#disabled").find("select").attr("disabled",true);
        }
        function enableFn(){
        group.children("#disabled").fadeTo(250,1);
        group.children("#disabled").find("input").attr("disabled",false);
        group.children("#disabled").find("select").attr("disabled",false);

        }
        disableFn();
        $(this).children("#trigger").find(":checkbox:first").change(function(){
        var checked = $(this).attr("checked");
        if(checked == true){
        enableFn();
        }else{
        disableFn();
        }
        });
        });


        $(".checkboxGroup").each(function(){
        var group = $(this);
        var uncheckAll = function(){
        group.find("input[type$='checkbox']").attr("checked",false);
        group.find("input[type$='checkbox']").change();
        }
        var uncheckRadioAndAll = function(){
        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").attr("checked",false);
        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").change();
        }


        group.find("#checkboxAll").find("input").click(
        /* This was tricky... A number of things needed to happen
        Basically, This is supposed to treat a group of inputs as if
        were all one big checkbox. It is designed so that a checkbox
        can be next to an input, and the user clicks the input, the
        checkbox checks as well. But, when the user clicks the checkbox,
        the browser marks the checkbox as checked. Therefore, when we check
        if the checkbox is already checked, it always respondes true...
        We needed to have 2 cases: when the clicking action is on the first checkbox
        and when the action is on any other. */
        function(){
        var flip;
        var checked = $(this).siblings(":checkbox:first").attr("checked");
        if($(this).attr("name") == $(this).parents("#checkboxAll:first").find(":checkbox:first").attr("name")){
        checked = $(this).attr("checked");
        flip = checked;
        }else{
        flip = !checked;
        }
        if($(this).attr("type") == "text") if(flip == false) flip = !filp; // this is so the user doesn't go to check
        the checkbox, then uncheck it when they hit the input.
        uncheckAll();
        $(this).parents("#checkboxAll:first").find(":checkbox").attr("checked",flip);
        $(this).parents("#checkboxAll:first").find(":checkbox").change();
        }
        );


        group.find("#checkboxRadio").find("input[type$='checkbox']").click(function(){
        uncheckAll();
        $(this).siblings("input[type$='checkbox']").attr("checked",false);
        $(this).attr("checked",true);
        $(this).change();
        });

        group.find("#checkboxCheckbox").click(
        function(){
        uncheckRadioAndAll();
        }
        );
        });
        });
        }
    </script>

    <script type="text/javascript">
        function val()
        {
        document.getElementById("fgh").disabled="true";
        }
    </script>

    <center>
        <h1>INTEGRATED ANTENATAL REGISTER</h1>
    </center>

    <!--Facility/client information Table-->
    <table id="inner">

        <tr>
            <th colspan="4">FACILITY/CLIENT INFORMATION</th>
        </tr>
        <tr>
            <td colspan="2">Health Unit:<encounterLocation default="1"/>Service provider:
                <encounterProvider role="Provider" style="autocomplete"/>
            </td>
        </tr>

        <tr>
            <td>Gender:
                <lookup class="value" expression="patient.gender"/>
            </td>
            <td>DOB:
                <lookup class="value" expression="patient.birthdate"/>
            </td>
            <td>Age:
                <lookup class="value" expression="patient.age"/>
            </td>
        </tr>
        <tr>
            <td>District:
                <lookup class="value" expression="patient.personAddress.countyDistrict"/>
            </td>
            <td>County:
                <lookup class="value" expression="patient.personAddress.stateProvince"/>
            </td>
            <td>Sub County:
                <lookup class="value" expression="patient.personAddress.address5"/>
            </td>
            <td></td>
        </tr>

    </table>


    <div class="row">
        Visit Date:
        <encounterDate default="today"></encounterDate>
    </div>


    <table id="inner" border="1">
        <tr>
            <th width="3.5%">(1)</th>
            <th width="9%">(2)</th>
            <th width="10%">(3)</th>
            <th width="9%">(4)</th>
            <th width="7.5%">(5)</th>
            <th width="5%">(6)</th>
            <th width="7.5%">(7)</th>
            <th colspan="2" width="7.5%">(8)</th>
            <th width="7.5%">(9a)</th>
            <th width="7.5%">(9b)</th>
            <th width="6%">(10)</th>
            <th width="11%">(11)</th>
            <th width="6.5%">(12)</th>
        </tr>

        <tr>
            <th>
                Serial
                No.
            </th>
            <th>
                Client No
            </th>
            <th>
                Name of Client
            </th>
            <th>
                Village + Parish
            </th>
            <th>
                Phone No.
            </th>
            <th>
                Age
            </th>
            <th>
                ANC Visit
            </th>
            <th>
                Gravida
            </th>
            <th>
                Parity
            </th>
            <th>
                Gestational Age
            </th>
            <th>
                ANC1 timing
            </th>
            <th>
                EDD dd/mm/yyyy
            </th>
            <th>
                Weight(kg)
                MUAC(cm)
                INR_no
            </th>
            <th>Blood Pressure</th>
        </tr>

        <tr>
            <td>
                <obs conceptId="99727" size="20"/>
            </td>
            <td>
                <lookup class="value"
                        complexExpression="#foreach( $patId in $patientIdentifiers.get('ANC Number') ) $patId #end "/>
            </td>
            <td>
                <lookup class="value" expression="patient.personName"/>
            </td>

            <td>
                <lookup class="value" expression="patient.personAddress.address3"/>
                <lookup class="value" expression="patient.personAddress.address4"/>
            </td>
            <td>
                <lookup class="value" expression="patient.personAddress.postalCode"/>
            </td>
            <td align="Center">
                <obs conceptId="99729"/>
            </td>
            <td align="Center">
                <obs conceptId="99324" size="20"/>
            </td>
            <td>
                <obs conceptId="5624" size="20"/>
            </td>
            <td>
                <obs conceptId="1053" size="20"/>
            </td>
            <td>
                <obs conceptId="1279" size="20"/>
            </td>

            <td>
                <!-- <obsgroup groupingConceptId="99730">
                    <span class="checkboxGroup">
                    <span id="checkboxRadio">
                    <obs conceptId="99732" answerConceptId="90003" answerLabel="(&#8730;)"/>
                    <obs conceptId="99732" answerConceptId="90004" answerLabel="(X)"/>
                    <obs conceptId="99732" answerConceptId="1175" answerLabel="N/A"/>
                    </span>
                </span>
                </obsgroup> -->
                <obs conceptId="99732" labelText="" answerConceptIds="90003,90004,1175" answerLabels="&#8730;,X,N/A"/>

            </td>
            <td>
                <obs conceptId="99731"/>
            </td>

            <!-- weight/MUAC cell -->
            <td>Wt(kg):
                <obs conceptId="90236"/>
                MUAC(cm)
                <obs conceptId="99030"/>
                INR_no:
                <obs conceptId="99733" size="20"/>
            </td>
            <td><obs conceptId="5085" size="6"/>/
                <obs conceptId="5086" size="6"/>
            </td>
        </tr>
    </table>

    <!-- Leave row to start another table section -->
    <table>
        <tr>
            <th>_</th>
        </tr>
    </table>

    <table id="inner" border="1">
        <tr>
            <th colspan="2" width="8%">(13)</th>
            <th width="8%">(14a)</th>
            <th width="16%">(14b)</th>
            <th width="6%">(15)</th>
            <th width="15.5%">(16)</th>
            <th width="5%">(17)</th>
            <th width="6%">(18)</th>
            <th colspan="2" width="9%">(19)</th>
            <th width="7.5%">(20)</th>
            <th width="5%">(21)</th>
            <th width="6%">(22)</th>
            <th width="3%">(23)</th>
            <th width="5%">(24)</th>
        </tr>

        <tr>
            <th colspan="2">
                EMTCT codes
            </th>
            <th rowspan="2">Diagnosis</th>
            <th rowspan="2">WHO clinical Stage/ CD4/ ViralLoad</th>
            <th>ARVs drugs</th>
            <th>Infant &amp; Young Child feeding Counseling (IYCF)</th>
            <th rowspan="2">TB Status</th>
            <th rowspan="2">Haemo globin (g/dL)</th>
            <th colspan="2">Syphilis Test Results</th>
            <th rowspan="2">Family
                Planning
                Counseling
            </th>
            <th rowspan="2">TT</th>
            <th rowspan="2">IPT
                /
                CTX
            </th>
            <th rowspan="2">Free
                LLIN
            </th>
            <th rowspan="2">Mebe nda zole</th>
        </tr>
        <tr>
            <th>W</th>
            <th>P</th>
            <th>Pre-ART No.</th>
            <th>Maternal Nutrition
                Counseling
            </th>
            <th>W</th>
            <th>P</th>
        </tr>

        <tr>
            <obsgroup groupingConceptId="99743">
                <td rowspan="3">
                    <obs conceptId="99317" labelText=""
                         answerConceptIds="99313,99734,99314,99315,99735,99736,99737,99738,99739,99741"
                         answerLabels="C,T,TR,TRR,TR&#8730;,TRR&#8730;,TRK,TRRK,TR+,TRR+"/>
                </td>

                <td rowspan="3">
                    <obs conceptId="99342" labelText=""
                         answerConceptIds="99313,99734,99314,99315,99735,99736,99737,99738,99739,99741"
                         answerLabels="C,T,TR,TRR,TR&#8730;,TRR&#8730;,TRK,TRRK,TR+,TRR+"/>
                </td>
            </obsgroup>
            <td rowspan="3">
                <obs conceptId="99321" size="15"/>
            </td>

            <td>WHO Clinical
                <obs conceptId="90203" labelText="" answerConceptIds="90033,90034,90035,90036,90293,90294,90295,90296"
                     answerLabels="Stage1,Stage2,Stage3,Stage4,StageT1,StageT2,StageT3,StageT4"/>
            </td>

            <td>
                <obs conceptId="99744" labelText="" answerConceptIds="99745,99746,99747,99748,1175"
                     answerLabels="ART,ARTK,ART&#8730;,ARTK&#8730;,N/A"/>
            </td>

            <td>
                <obs conceptId="99749" labelText="IYCF:" answerConceptIds="90003,90004" answerLabels="Yes,No"/>
            </td>

            <td rowspan="3">
                <obs conceptId="90216" labelText="" answerConceptIds="90079,90073,90078,90071"
                     answerLabels="1:No signs,2:Suspect,3:Diagnosed,4:TB Rx"/>
            </td>

            <td rowspan="3">
                <obs conceptId="21"/>
            </td>

            <td rowspan="3">
                <obs conceptId="99752" labelText="" answerConceptIds="99754,99755,99756,99757"
                     answerLabels="Rx,+ve,NR,NT"/>
            </td>

            <td rowspan="3">
                <obs conceptId="99753" labelText="" answerConceptIds="99754,99755,99756,99757"
                     answerLabels="Rx,+ve,NR,NT"/>
            </td>

            <obsgroup groupingConceptId="99297">
                <td rowspan="3">
                    <obs conceptId="99296" labelText="" answerConceptIds="99294,99295" answerLabels="C,C/D"/>
                </td>
            </obsgroup>

            <obsgroup groupingConceptId="99304">
                <td rowspan="3">
                    <obs conceptId="99303" labelText="" answerConceptIds="99298,99299,99300,99301,99302,1267"
                         answerLabels="1st,2nd,3rd,4th,5th,C"/>
                </td>
            </obsgroup>

            <obsgroup groupingConceptId="99307">
                <td rowspan="3">
                    <obs conceptId="99306" labelText="" answerConceptIds="99298,99299,99305,1267,99758,99759"
                         answerLabels="1st,2nd,ND,C,CTX,CTX&#8730;"/>
                </td>

                <td rowspan="3">
                    <obs conceptId="99760" labelText="" answerConceptIds="90003,90004"/>
                </td>

                <td rowspan="3">
                    <obs conceptId="99312" labelText="" answerConceptIds="99309,99310,99311,1267"
                         answerLabels="&#8730;,X,N/A,C"/>
                </td>
            </obsgroup>
        </tr>

        <tr>
            <td>
                <obs conceptId="5497" labelText="CD4:"/>
            </td>
            <td rowspan="2">
                <obs conceptId="99751" labelText=""/>
            </td>
            <td rowspan="2">
                <obs conceptId="99750" labelText="MNC:" answerConceptIds="90003,90004" answerLabels="Yes,No"/>
            </td>
        </tr>
        <tr>
            <td>
                <obs conceptId="856" labelText="VL:"/>
            </td>
        </tr>

    </table>

    <!-- Leave row to start another table section -->
    <table>
        <tr>
            <th>_</th>
        </tr>
    </table>
    <table id="inner1" border="1">
        <tr>
            <th colspan="2">(25)</th>
            <th>(26)</th>
            <th>(27)</th>
            <th>(28)</th>
        </tr>

        <tr>
            <th colspan="2">
                iron/Folic Acid
            </th>
            <th rowspan="2">Other Treatments</th>
            <th rowspan="2">Referral In/Out</th>
            <th rowspan="2">Risk Factor/Complications</th>
        </tr>
        <tr>
            <th>Fe</th>
            <th>Folic</th>

        </tr>

        <tr>
            <obsgroup groupingConceptId="99307">
                <td>
                    <obs conceptId="99318" labelText="" answerConceptIds="90003,90004" answerLabels="&#8730;,X"/>
                    <obs conceptId="99761"/>
                </td>

                <td>
                    <obs conceptId="99319" labelText="" answerConceptIds="90003,90004" answerLabels="&#8730;,X"/>
                    <obs conceptId="99762"/>
                </td>

                <td>
                    <obs conceptId="99320"/>
                </td>
            </obsgroup>

            <td>
                <obs conceptId="99322" labelText="" answerConceptIds="99763,99764,99765,99766"
                     answerLabels="Ref out,Ref IN,C/Ref IN,FSG"/>
                <obs conceptId="99767" size="15"/>
            </td>

            <td>
                <obs conceptId="99768" size="30"/>
            </td>
        </tr>

    </table>
    <submit></submit>
    <br/>

</htmlform>